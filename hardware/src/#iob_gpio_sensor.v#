`timescale 1ns/1ps

`include "iob_lib.vh"
`include "iob_gpio_swreg_def.vh"


module Movement_sensor
  (
   
   input      clk,
   input      sensor, // Data input
   input      enable,
   input      rst,
   input      sync_reset,      
   
   output reg Q // output Q	      
   );

   wire  OUT_OR,
   wire  OUT_NOT,
   wire  D,
   wire  OUT_FF,

   assign OUT_OR = sensor | Q,
   assign OUT_NOT = ~rst,
   assign D = OUT_OR & OUT_NOT,


   always @(posedge clk, posedge enable) begin

     if(OUT_NOT && sensor) begin 
	OUT_OR <= 1'b1;//perguntar ao stor do Q
	D <= 1'b1;
	
     end 
     if(OUT_NOT && ~sensor && Q) begin
        D <= 1'b1;
 
     end
     if(~OUT_NOT) begin
        D <= 1'b0;
     end
     
     iob_gpio_ff u1(Q,clk,sync_reset,D,enable);
     
 end 
     
endmodule
